<div class="container">
    <header>
        <button (click)="_back()">
            <svg xmlns="http://www.w3.org/2000/svg" width="1rem" height="2rem" viewBox="0 0 12 24">
                <path fill="currentColor" fill-rule="evenodd"
                    d="m3.343 12l7.071 7.071L9 20.485l-7.778-7.778a1 1 0 0 1 0-1.414L9 3.515l1.414 1.414z" />
            </svg>
        </button>
        <h1>Detalles de la Venta</h1>
        <button class="print" (click)="_printTicket()">
            <svg xmlns="http://www.w3.org/2000/svg" width="1.5rem" height="1.5rem" viewBox="0 0 24 24">
                <path fill="currentColor"
                    d="m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11zm-6 4q-.825 0-1.412-.587T4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413T18 20z" />
            </svg>
            Descargar Ticket
        </button>
    </header>
    <main>
        @if (_isLoading()) {
        <page-loader />
        }
        @else if (_error()) {
        <page-error [statusCode]="_error()!.statusCode" />
        }
        @else {
        <h2>Informaci√≥n de la venta:</h2>
        <div class="info">
            <p><b>ID de la venta: </b>{{_response()!.id}}.</p>
            <copy-button [value]="_response()!.id" />
        </div>
        <div class="double">
            <p><b>Cliente: </b>{{_response()!.client}}.</p>
            <p><b>Vendedor: </b>{{_response()!.employee}}.</p>
        </div>
        <p><b>Fecha de Venta: </b>{{_response()!.saleDate |date: 'dd/MM/yyyy hh:mm a'}}.</p>
        <h3>Articulos Vendidos:</h3>
        <div class="table-wrapper">
            <table>
                <thead>
                    <th>SKU</th>
                    <th>Producto</th>
                    <th>Contenido</th>
                    <th>Cantidad</th>
                    <th>Precio</th>
                    <th>Subtotal</th>
                </thead>
                <tbody>
                    @for (product of _response()!.products; track $index) {
                    <tr>
                        <td>{{product.sku}}</td>
                        <td>{{product.name}}</td>
                        <td>{{product.content}} {{product.unit}}</td>
                        <td>{{product.quantity}}</td>
                        <td>{{product.price | currency}}</td>
                        <td>{{product.subtotal | currency}}</td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
        <div class="total-container">
            <span>Total:</span>
            <span class="total">{{_response()!.total|currency}}</span>
        </div> }
    </main>
</div>
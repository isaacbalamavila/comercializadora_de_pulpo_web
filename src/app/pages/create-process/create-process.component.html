<div class="container">
    <header>
        <h1>Crear un Proceso</h1>
        <user-info />
    </header>
    <main>
        <div class="product-details">
            <h3>Detalles del producto</h3>
            <product-filter placeholder="Buscar Producto" [isSearch]="true" [onlyActives]="true"
                (onSelect)="_productId.set($event)" />
            @if (_product()) {
            <hr>
            <h4 class="capitalize">{{_product()!.name}}</h4>
            <hr>
            <p><b>SKU: </b>{{_product()!.sku}}</p>
            <p><b>Materia Prima: </b>{{_product()!.rawMaterial}}.</p>
            <p><b>Contenido: </b>{{_product()!.content}} {{_product()!.unit}}.</p>
            <hr>
            <h5>Cantidad a Producir: *</h5>
            <input-number-form label="" [showLabel]="false" [(ngModel)]="_amount" [min]="1" />
            @if (!_validAmount()) { <span class="error">Cantidad Inv치lida. Deber ser
                mayor a 1 y sin decimales</span>
            }
            }
        </div>
        <div class="process-details">
            <h2>Detalles del Proceso</h2>
            <hr>
            <h3>Informaci칩n de Producci칩n del Producto:</h3>
            <p class="capitalize"><b>Nombre: </b>{{_product()?.name ?? 'No seleccionado'}}.</p>
            <p><b>Materia Prima: </b>{{_product()?.rawMaterial ?? 'Desconocida'}}.</p>
            <p><b>Materia Prima Necesaria por Pieza: </b>{{_product()?.rawMaterialNeededKg ?? 0}} kg.</p>
            <p><b>Tiempo Necesario por Pieza: </b>{{_product()?.timeNeededMin ?? 0}} minutos.</p>
            <hr>
            @if (_product()) {
            <h3>Informaci칩n General del Proceso</h3>
            <p><b>Tiempo Necesario Total:</b> {{ formattedTotalTime() }}.</p>
            <p><b>Materia Prima Necesaria:</b> {{_totalMaterial()| number}} kg.</p>
            @if (!_allowSchedule() && _amount()) {
            <div class="out-schedule">
                <svg xmlns="http://www.w3.org/2000/svg" width="1.5rem" height="1.5rem" viewBox="0 0 24 24">
                    <g fill="currentColor">
                        <path
                            d="M12 14a1 1 0 0 1-1-1v-3a1 1 0 1 1 2 0v3a1 1 0 0 1-1 1m-1.5 2.5a1.5 1.5 0 1 1 3 0a1.5 1.5 0 0 1-3 0" />
                        <path
                            d="M10.23 3.216c.75-1.425 2.79-1.425 3.54 0l8.343 15.852C22.814 20.4 21.85 22 20.343 22H3.657c-1.505 0-2.47-1.6-1.77-2.931zM20.344 20L12 4.147L3.656 20z" />
                    </g>
                </svg>
                <div class="content">
                    <span class="title">Conflicto de Horario</span>
                    <span class="body">El proceso no puede realizarse debido a que sobrepasa el horario laboral (6:00
                        PM).</span>
                </div>
            </div>
            }

            @if (_product() && _amount()) {
            <loading-button label="Crear Proceso"
                [disabled]="!_product() || !_amount() || !_validAmount() || !_allowSchedule()"
                [isLoading]="_isLoading()" (onClick)="_createProcess()" />
            }
            }
        </div>
    </main>

</div>